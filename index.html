<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ocean Tendency | Deep Sea Numerology</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Noto+Sans+JP:wght@100;300;500&family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
:root {
  --neon-cyan: #00f2ff;
  --neon-blue: #0062ff;
  --deep-blue: #000814;
  --glass-bg: rgba(0, 20, 40, 0.85);
  --border-cyan: rgba(0, 242, 255, 0.4);
}

/* --- 全体レイアウト --- */
body, html {
  margin: 0; padding: 0; 
  min-height: 100%;
  font-family: 'Noto Sans JP', sans-serif;
  background-color: var(--deep-blue);
  color: #e0faff;
  /* 横揺れ防止 */
  overflow-x: hidden; 
}

/* 通常時はスクロール禁止、結果表示時は解禁 */
body { overflow-y: hidden; }
body.in-result { overflow-y: auto; }

/* 背景制御 */
#ocean-bg {
  position: fixed; top: 0; left: 0; width: 100%; height: 100%;
  z-index: -2;
  background: radial-gradient(circle at center, #001a33 0%, #000814 100%);
}

#ocean-bg::before {
  content: ""; position: absolute; inset: 0;
  background: 
    linear-gradient(rgba(0, 11, 26, 0.8), rgba(0, 11, 26, 0.8)),
    repeating-linear-gradient(0deg, transparent 0, rgba(0, 242, 255, 0.05) 1px, transparent 2px),
    repeating-linear-gradient(90deg, transparent 0, rgba(0, 242, 255, 0.05) 1px, transparent 2px);
  background-size: 100% 100%, 60px 60px, 60px 60px;
  z-index: 1;
}

/* スキャンライン演出 */
.scanline {
  position: fixed; top: 0; left: 0; width: 100%; height: 2px;
  background: rgba(0, 242, 255, 0.2);
  box-shadow: 0 0 10px var(--neon-cyan);
  z-index: 1000; pointer-events: none;
  animation: scan 4s linear infinite;
}
@keyframes scan { 0% { top: -5%; } 100% { top: 105%; } }

.bubble {
  position: absolute; bottom: -50px;
  background: var(--neon-cyan); border-radius: 50%;
  pointer-events: none; filter: blur(3px);
  animation: rise linear infinite; z-index: -1;
  opacity: 0.3;
}
@keyframes rise {
  0% { transform: translateY(0) scale(1); opacity: 0; }
  50% { opacity: 0.3; }
  100% { transform: translateY(-120vh) scale(1.5); opacity: 0; }
}

/* ヘッダー */
.site-header {
  position: fixed; top: 0; width: 100%; padding: 15px 25px;
  display: flex; justify-content: space-between; align-items: center;
  box-sizing: border-box; z-index: 100;
  border-bottom: 1px solid var(--border-cyan);
  background: rgba(0, 15, 30, 0.8);
  backdrop-filter: blur(10px);
}

.site-title {
  font-family: 'Orbitron', sans-serif;
  font-size: 1rem; letter-spacing: 0.4rem;
  color: var(--neon-cyan); text-shadow: 0 0 10px var(--neon-cyan);
}

/* メインフレーム */
.main-frame {
  position: relative;
  min-height: 100vh;
  display: flex; align-items: center; justify-content: center;
  box-sizing: border-box;
  padding: 100px 20px 60px 20px; /* 上下の余白 */
}

.ui-panel {
  background: var(--glass-bg);
  border: 1px solid var(--border-cyan);
  padding: 40px;
  backdrop-filter: blur(20px);
  position: relative;
  max-width: 900px; width: 100%;
  box-shadow: 0 0 50px rgba(0, 242, 255, 0.1);
}

/* 装飾コーナー */
.corner { position: absolute; width: 15px; height: 15px; border: 2px solid var(--neon-cyan); }
.c-tl { top: -2px; left: -2px; border-right: none; border-bottom: none; }
.c-tr { top: -2px; right: -2px; border-left: none; border-bottom: none; }
.c-bl { bottom: -2px; left: -2px; border-right: none; border-top: none; }
.c-br { bottom: -2px; right: -2px; border-left: none; border-top: none; }

/* 入力欄 */
input[type="date"] {
  background: rgba(0,242,255,0.05);
  border: 1px solid var(--border-cyan);
  color: var(--neon-cyan);
  padding: 12px 20px;
  font-family: 'Orbitron';
  font-size: 1.2rem;
  outline: none;
  width: 100%; max-width: 280px;
  box-sizing: border-box;
}

.cyber-btn {
  font-family: 'Orbitron', sans-serif;
  padding: 15px 40px; background: transparent;
  color: var(--neon-cyan); border: 1px solid var(--neon-cyan);
  cursor: pointer; position: relative; transition: 0.3s;
  letter-spacing: 2px;
  clip-path: polygon(10% 0, 100% 0, 100% 70%, 90% 100%, 0 100%, 0 30%);
}
.cyber-btn:hover { background: var(--neon-cyan); color: #000; box-shadow: 0 0 25px var(--neon-cyan); }

/* --- 解析結果表示のレイアウト --- */
.result-layout { 
  display: grid; 
  grid-template-columns: 1fr 1.2fr; /* 左右に分割 */
  gap: 40px; 
  align-items: center; /* 垂直方向中央揃えに変更 */
}

/* 画像表示エリア */
.organism-container {
  position: relative;
  display: flex; justify-content: center; align-items: center;
  background: radial-gradient(circle, rgba(0, 242, 255, 0.1) 0%, transparent 70%);
  min-height: 400px; /* 画像拡大に合わせて高さを調整 */
}

.floating-organism {
  width: 100%; 
  max-width: 490px; /* 350px * 1.4 = 490px */
  height: auto;
  filter: drop-shadow(0 0 20px var(--neon-cyan));
  z-index: 5;
}

.anim-float { animation: float 6s ease-in-out infinite; }
@keyframes float { 
  0%, 100% { transform: translateY(0) rotate(2deg); } 
  50% { transform: translateY(-20px) rotate(-2deg); } 
}

/* テキストコンテンツエリア */
.result-content { }
.result-content h2 { 
  font-size: 1.8rem; margin: 5px 0 20px 0; 
  color: #fff; text-shadow: 0 0 15px var(--neon-cyan);
  border-left: 4px solid var(--neon-cyan); padding-left: 15px;
}

.label-box {
  font-family: 'Share Tech Mono', monospace; font-size: 0.7rem; 
  color: var(--neon-cyan); background: rgba(0, 242, 255, 0.1); 
  padding: 2px 8px; display: inline-block; margin-bottom: 5px;
  border: 1px solid rgba(0, 242, 255, 0.2);
}

.data-list { list-style: none; padding: 0; font-size: 0.85rem; margin-bottom: 20px; }
.data-list li { margin-bottom: 8px; color: #b0dfff; line-height: 1.4; }
.data-list li::before { content: "» "; color: var(--neon-cyan); }

.message-box {
  padding: 15px; background: rgba(0, 242, 255, 0.05);
  border: 1px solid var(--border-cyan);
  font-size: 0.9rem; line-height: 1.6; border-radius: 4px;
}

/* 解析中ローディング */
#loadingOverlay {
  display: none; position: absolute; inset: 0; background: var(--deep-blue);
  z-index: 10; flex-direction: column; align-items: center; justify-content: center;
}

/* --- モバイル対応 --- */
@media (max-width: 850px) {
  .result-layout { 
    grid-template-columns: 1fr; /* 縦1列にする */
    gap: 10px; 
  }
  .organism-container {
    min-height: 280px; /* スマホでの画像エリア確保 */
    order: -1; /* 画像を必ずテキストの上に配置 */
  }
  .floating-organism {
    max-width: 310px; /* 220px * 1.4 = 308px (切り上げ310px) */
  }
  .ui-panel {
    padding: 30px 20px;
    width: 95%;
  }
  .result-content h2 {
    font-size: 1.5rem;
  }
}
</style>
</head>
<body onload="createBubbles()">

<div id="ocean-bg"></div>
<div class="scanline"></div>

<header class="site-header">
  <div class="site-title">OCEAN TENDENCY</div>
  <div id="systemStatus" style="font-family:'Share Tech Mono'; color:var(--neon-cyan); font-size:0.75rem;">SYSTEM_READY</div>
</header>

<main class="main-frame">
  <div class="ui-panel" id="inputPanel">
    <div class="corner c-tl"></div><div class="corner c-tr"></div>
    <div class="corner c-bl"></div><div class="corner c-br"></div>
    
    <div style="text-align:center;">
      <h2 style="font-family:'Orbitron'; font-weight:300; letter-spacing:0.3rem; font-size:0.9rem; margin-bottom:40px;">GENOME SCANNER V2.0</h2>
      <input type="date" id="birthdate">
      <div style="margin-top:40px;">
        <button class="cyber-btn" id="resultBtn">RUN ANALYSIS</button>
      </div>
    </div>
    <div class="creator-tag" style="position: absolute; right: 15px; bottom: 15px; font-family: 'Share Tech Mono'; font-size: 0.6rem; color: rgba(0, 242, 255, 0.4);">DATA_VERSION: 2.0.4</div>
  </div>

  <div class="ui-panel" id="resultContainer" style="display:none;">
    <div id="loadingOverlay">
        <div style="font-family:'Orbitron'; color:var(--neon-cyan); margin-bottom:20px; letter-spacing:5px;">ANALYZING...</div>
        <div style="width:200px; height:2px; background:rgba(0,242,255,0.2); position:relative; overflow:hidden;">
            <div id="progressBar" style="position:absolute; top:0; left:-100%; width:100%; height:100%; background:var(--neon-cyan);"></div>
        </div>
    </div>
    <div class="corner c-tl"></div><div class="corner c-tr"></div>
    <div class="corner c-bl"></div><div class="corner c-br"></div>
    
    <div id="resultContent"></div>
    
    <div style="text-align:right; margin-top:25px;">
      <button class="cyber-btn" style="padding: 10px 25px; font-size:0.7rem;" id="backBtn">RE-SCAN</button>
    </div>
  </div>
</main>

<script>
const numerologyData = {
    "01": { title: "開拓突進型", organism: "CYBER-SHARK (High-Speed)", abilities: ["突破口の形成", "初動エネルギーの最大化", "未踏領域の開拓"], cautions: ["長期維持のリソース管理", "後方調整の軽視"], message: "速い流れは、迷わず前へ進む。進んだあとで、海は形を整えていく。" },
    "02": { title: "共鳴調整型", organism: "DOLPHIN (Sonar-Sync)", abilities: ["周波数同調", "複数個体の仲介", "環境調和"], cautions: ["個体境界の喪失", "意思決定の外部依存"], message: "波が重なる場所では、静かな響きが生まれる。感じた流れは、海の一部だ。" },
    "03": { title: "発光表現型", organism: "TROPICAL-UNIT (Light-Emitting)", abilities: ["視覚的情報拡散", "エンターテインメント", "心理的活性化"], cautions: ["注意散漫による出力低下", "評価への過剰反応"], message: "光は、隠れようとしない。泳ぐほどに、色は広がっていく。" },
    "04": { title: "構造安定型", organism: "TURTLE (Heavy-Armor)", abilities: ["基盤構造の構築", "長期的データの保存", "物理的防護"], cautions: ["プロトコルの固定化", "機動力の欠如"], message: "深い場所では、速さは必要ない。重ねた時間が、海を支えている。" },
    "05": { title: "流動探査型", organism: "OCTOPUS (Shifting-Logic)", abilities: ["多角的環境適応", "非定型ルートの探索", "情報収集"], cautions: ["核となる目的の忘却", "定着への拒絶感"], message: "形は、ひとつに決まらない。流れに合わせて、海も姿を変えている。" },
    "06": { title: "保護循環型", organism: "WHALE (Infrasound-Core)", abilities: ["広域エコシステムの維持", "育成支援", "情緒的エネルギー供給"], cautions: ["過剰なエネルギー背負い込み", "自己修復プロトコルの後回し"], message: "遠くまで届くものほど、静かに広がる。見えない場所でも、流れは続いている。" },
    "07": { title: "深層観測型", organism: "ABYSS-FISH (Extreme-Scanner)", abilities: ["深層心理の解析", "本質の抽出", "孤立環境での稼働"], cautions: ["論理の迷宮入り", "外部通信の遮断"], message: "光のない場所にも、海は広がっている。静けさの中で、多くのものが見えてくる。" },
    "08": { title: "支配構築型", organism: "ORCA (Strategic-Command)", abilities: ["戦略的統率", "大規模実行", "現実世界への実装"], cautions: ["高圧的な命令出力", "感情データのノイズ処理"], message: "大きな流れは、静かに動く。力は、波とともに形を変える。" },
    "09": { title: "循環解放型", organism: "JELLYFISH (Border-Dissolve)", abilities: ["既存システムの初期化", "ヒーリング", "エネルギーの全体還元"], cautions: ["現実座標の消失", "外部要因への過剰透過"], message: "境目がほどけるとき、海は広がる。終わりのあとに、新しい流れが生まれる。" },
    "11": { title: "直感通信型", organism: "MANTA (Dimensional-Glider)", abilities: ["高次信号の受信", "ビジョンの転写", "先導"], cautions: ["過剰な信号負荷", "現実レイヤーとの乖離"], message: "見えない波も、確かに動いている。高く泳ぐほど、海の広さが見えてくる。" },
    "22": { title: "世界設計型", organism: "REEF-ARCHITECT (Global-Struct)", abilities: ["大規模社会設計", "永続的システムの構築", "具現化"], cautions: ["全責任の集中負荷", "微細な不整合への過敏反応"], message: "小さな積み重ねが、やがて海の形になる。時間は、静かに層を作っていく。" },
    "33": { title: "全体統合型", organism: "THE OCEAN (Universal-Field)", abilities: ["全データの包含", "普遍的愛の供給", "存在の肯定"], cautions: ["自己個体意識の希薄化", "肉体的疲労の感知不全"], message: "名前がなくても、海は存在している。すべてを含んだまま、流れは続いていく。" }
};

function createBubbles() {
    const bg = document.getElementById('ocean-bg');
    for (let i = 0; i < 20; i++) {
        const b = document.createElement('div');
        b.className = 'bubble';
        const size = Math.random() * 6 + 2 + 'px';
        b.style.width = size; b.style.height = size;
        b.style.left = Math.random() * 100 + 'vw';
        b.style.animationDuration = Math.random() * 8 + 4 + 's';
        b.style.animationDelay = Math.random() * 5 + 's';
        bg.appendChild(b);
    }
}

function calcNumerology(dateStr){
    const digits = dateStr.replace(/-/g, '').split('');
    let sum = digits.reduce((acc, d) => acc + Number(d), 0);
    while (sum > 9 && ![11, 22, 33].includes(sum)) {
        sum = sum.toString().split('').reduce((acc, d) => acc + Number(d), 0);
    }
    return sum;
}

const resultBtn = document.getElementById('resultBtn');
const resultContainer = document.getElementById('resultContainer');
const inputPanel = document.getElementById('inputPanel');
const resultContent = document.getElementById('resultContent');
const backBtn = document.getElementById('backBtn');
const status = document.getElementById('systemStatus');
const loading = document.getElementById('loadingOverlay');
const progressBar = document.getElementById('progressBar');

resultBtn.addEventListener('click', () => {
  let birth = document.getElementById('birthdate').value; 
  if(!birth){alert("BIRTHDATE REQUIRED"); return;}
  
  inputPanel.style.display = 'none';
  resultContainer.style.display = 'block';
  loading.style.display = 'flex';
  status.innerText = "RUNNING_ANALYSIS...";

  // プログレスバー
  progressBar.style.transition = 'none';
  progressBar.style.left = '-100%';
  setTimeout(() => {
    progressBar.style.transition = 'all 1.5s ease-in-out';
    progressBar.style.left = '0%';
  }, 10);

  setTimeout(() => {
    loading.style.display = 'none';
    showResult(birth);
  }, 1800);
});

function showResult(birth) {
  let num = calcNumerology(birth);
  let code = (num < 10) ? ('0' + num) : num.toString();
  let data = numerologyData[code];

  document.body.classList.add('in-result');
  status.innerText = "ANALYSIS_COMPLETE / ID: " + code;
  
  const animClass = (num === 33) ? "static-33" : "anim-float";

  resultContent.innerHTML = `
    <div class="result-layout">
      <div class="organism-container">
        <img src="code${code}.png" alt="${data.organism}" 
             class="floating-organism ${animClass}" 
             style="opacity:0; transition: opacity 1s ease-in-out;">
      </div>
      <div class="result-content">
        <div class="label-box">GENETIC_ID: ${code}</div>
        <h2>${data.title}</h2>
        
        <div class="label-box">MODEL_INFO</div>
        <p style="margin:2px 0 15px 0; color:var(--neon-cyan); font-family:'Orbitron'; font-size:0.9rem;">${data.organism}</p>
        
        <div class="label-box">CORE_ABILITIES</div>
        <ul class="data-list">${data.abilities.map(a => `<li>${a}</li>`).join('')}</ul>
        
        <div class="label-box">SYSTEM_CAUTIONS</div>
        <ul class="data-list">${data.cautions.map(c => `<li>${c}</li>`).join('')}</ul>
        
        <div class="label-box">TERMINAL_MSG</div>
        <div class="message-box">${data.message}</div>
      </div>
    </div>
  `;

  // 画像をふわっと表示
  setTimeout(() => {
    const img = resultContent.querySelector('.floating-organism');
    if(img) img.style.opacity = '1';
  }, 100);
}

backBtn.addEventListener('click', () => {
  document.body.classList.remove('in-result');
  window.scrollTo(0,0);
  status.innerText = "SYSTEM_READY";
  resultContainer.style.display = 'none';
  inputPanel.style.display = 'block';
});
</script>
</body>
</html>
